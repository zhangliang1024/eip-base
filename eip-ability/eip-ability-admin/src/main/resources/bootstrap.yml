server:
  port: 5002
spring:
  mvc:
    pathmatch:
      matching-strategy: ant_path_matcher
  main:
    allow-bean-definition-overriding: true
  application:
    name: wemirr-platform-authority
  cache:
    redis:
      cache-null-values: false
      time-to-live: 2H
    type: redis
#  config:
#    import:
#    - optional:nacos:swagger.yaml # 这是有默认值的写法
#    - optional:nacos:${spring.application.name}.properties
#    - optional:nacos:mybatis-plus-default.yaml?group=DEFAULT_GROUP&refreshEnabled=true #这是完写法
  cloud:
    nacos:
      server-addr: 140.246.154.99:8848
      discovery:
        metadata:
          group: ${spring.application.name}
          version: 1.0
#      config:
#        server-addr: 140.246.154.99:8848
#        refresh-enabled: true
#        namespace: eip

    gateway:
      globalcors:
        cors-configurations:
          '[/**]':
            allow-credentials: true
            allowedHeaders:
            - '*'
            allowedMethods:
            - '*'
            allowedOrigins:
            - '*'
  datasource:
    dynamic:
      datasource:
        master:
          driver-class-name: com.mysql.cj.jdbc.Driver
          password: 123456
          pool-name: HikariDataSourcePool
          type: com.zaxxer.hikari.HikariDataSource
          url: jdbc:mysql://140.246.154.99:3306/wemirr-platform?useUnicode=true&characterEncoding=utf8&allowMultiQueries=true&serverTimezone=GMT%2B8&useSSL=false&allowPublicKeyRetrieval=true&rewriteBatchedStatements=true
          username: root
      hikari:
        connection-timeout: 30000
        is-auto-commit: true
        max-lifetime: 1800000
        max-pool-size: 15
        min-idle: 5
      primary: master
      strict: true
  rabbitmq:
    host: 140.246.154.99
    password: admin
    username: admin
  redis:
    database: 2
    host: 140.246.154.99
    password: 123456
    port: 6379


extend:
  mybatis-plus:
    multi-tenant:
      strategy: local
      type: datasource
  redis:
    lock:
      enabled: true
logging:
  level:
    com:
      wemirr: debug
    springfox:
      documentation: warn
management:
  endpoints:
    web:
      exposure:
        include: '*'
security:
  oauth2:
    client:
      client-id: authority
      ignore:
        resource-urls:
        - /actuator/**
        - /v2/api-docs
        - /oauth/**
        - /actuator/**
        - /favicon.ico
        - /swagger-ui.html
        - /swagger-ui/**
        - /swagger-resources
        - /swagger-resources/**
        - /v3/api-docs
        - /v3/api-docs/**
        - /message/**
        - /instances/**
        - /captcha


springdoc:
  swagger-ui:
    oauth:
      app-name: authority
      client-id: client
      client-secret: client
      use-pkce-with-authorization-code-grant: true
  plus:
    info:
      title: Swagger API
      description: 聚合文档
      terms-of-service: https://blog.battcn.com/
      license:
        name: apache
        url: apache
      contact:
        name: 唐亚峰
        url:  https://cloud.battcn.com/
        email: 1837307557@qq.com
    security-schemes:
      oauth2:
        name: oauth2
        type: oauth2
        in: header
        bearer-format: Bearer
        flows:
          password:
            scopes:
              server: server
            token-url: http://localhost:9000/authority/oauth/token?tenant_code=0000
mybatis-plus:
  mapper-locations:
  - classpath:com/eip/**/mapper/**/*.xml
  #实体扫描，多个package用逗号或者分号分隔
  typeAliasesPackage: com.eip.**.entity;com.eip.**.mybatis.typehandler
  typeEnumsPackage: com.eip.**.enums,com.eip.framework.db.mybatis,com.eip.framework.db.mybatis.auth
  global-config:
    db-config:
      id-type: auto
      insert-strategy: NOT_NULL
      update-strategy: NOT_NULL
      select-strategy: not_empty
  configuration:
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl #打印日志
    map-underscore-to-camel-case: true
    cache-enabled: false